<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="app.css">
</head>
<body>

   <!-- Navigation Menu -->
   <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
        <a class="navbar-brand" href="#logo" id="logoName">EMO</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="#highlights">Highlights</a></li>
                <li class="nav-item"><a class="nav-link" href="#services">Services</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Account</a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#about">History</a></li>
                        <li><a class="dropdown-item" href="index.html">Log out</a></li>     
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

    <!-- Content Section -->
    <section class="home">
        <div class="home-section" id="home">
            <div class="home-content">
                <p>Welcome to</p>
                <h2>Empowerment, Mindfulness, and Optimism (EMO)</h2>
                <i>"Embrace Your Feelings, Enhance Your Future."</i>
            </div>
        </div>
    </section>
    
    <section class="highlights">
        <div class="highlights-section" id="highlights">
            <div class="container-fluid" style="margin-top: 2rem;">
                <div class="row justify-content-center">
                    <!-- Left side (Text and Button) -->
                    <div class="col-12 col-md-6 text-center">
                        <h1>HEP! ANSWER SA!!</h1>
                        
                        <!-- Add Vote button -->
                        <button type="button" class="btn btn-primary mt-3 mb-3" data-bs-toggle="modal" data-bs-target="#voteModal">
                            Add Vote
                        </button>
                    </div>
            
                    <!-- Right side (Pie Chart) -->
                    <div class="col-12 col-md-6 d-flex justify-content-center align-items-center">
                        <div class="results-card">
                            <canvas id="myChart"></canvas>
                        </div>

                         <!-- Action Buttons -->
    <div class="d-flex justify-content-center mt-3">
        <button id="editVote" class="btn btn-warning me-2" disabled>Edit Vote</button>
        <button id="removeVote" class="btn btn-danger me-2" disabled>Remove Vote</button>
        <button id="doneVote" class="btn btn-success" disabled>Done</button>
    </div>
                    </div>
                </div>
            </div>            

            <!-- Modal -->
            <div class="modal fade" id="voteModal" tabindex="-1" aria-labelledby="voteModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="voteModalLabel">Modal title</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <h3>Which Department are you?</h3>
                            <form id="voteForm">
                                <select id="voteOption" class="form-select" required>
                                    <option value="" disabled selected>Select an option</option>
                                </select>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                    <button type="submit"  class="btn btn-primary">Save changes</button>
                                </div>
                            </form>    
                        </div>         
                    </div>
                </div>
            </div>
        
            <!-- Toast Notification -->
            <div class="toast-container position-fixed top-0 end-0 p-3">
                <div id="voteToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <strong class="me-auto">Vote Cast</strong>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        Your vote has been recorded!
                    </div>
                </div>
            </div>
        </div>
        <script src="js/app.js"></script> <br>
    </section>
    

    <div class="Lservices-section" id="services">
        <div class="Lservices-text">
            <h1>RECORDS</h1>
        </div>
    
        <!-- Bar Chart Section -->
        <div class="row align-items-center">
            <div class="col-md-6 text-center">
                <canvas id="barChart1"></canvas>
                <p class="chart-label">Daily Emotions</p>
            </div>
            <div class="col-md-6 text-center">
                <canvas id="barChart2"></canvas>
                <p class="chart-label">Label for Bar Chart 2</p>
            </div>
        </div>
    </div>
    
    <section class="info">
        <div class="info-section" id="infoSection">
            <div class="info-text">
                <p>The questions provided below track students' daily emotions.</p>
            </div>
        </div>
    </section>    

    <!-- Content Section -->

    <section class="about">
        <div class="about-section" id="tepSection">
            <div class="about-text">
                <h2>MGA PANGUTANA</h2>
            </div>
        </div>
        <br>

        <div class="chart-section text-center">
            <h3>Onsay gibati nimo karon?</h3>
            <select id="satisfactionDropdownNew" onchange="updateChart('New')">
                <option value="Happy">Happy</option>
                <option value="Sad">Sad</option>
                <option value="Proud">Proud</option>
                <option value="Nervous">Nervous</option>
                <option value="Tired">Tired</option>
                <option value="Disappointed">Disappointed</option>
                <option value="Scared">Scared</option>
                <option value="Confused">Confused</option>
                <option value="Excited">Excited</option>
            </select>
            <canvas id="responseChartNew"></canvas>
            <button id="addButtonNew" onclick="addVote('New')">Add Vote</button>
            <button id="editButtonNew" onclick="editVote('New')" class="disabled">Edit Vote</button>
            <button id="removeButtonNew" onclick="removeVote('New')" class="disabled">Remove Vote</button>
            <button id="doneButtonNew" onclick="doneVote('New')" class="disabled">Done</button>
            <div id="feedbackNew" class="feedback"></div>
        </div>
        <br>
        <!-- Four Question Charts Below -->
    <div class="chart-section">     
        <div class="chart-container">
            <!-- Question 1 -->
            <div class="chart-wrapper">
                <h3>Kamusta buhay studyante?</h3>
                <select id="satisfactionDropdown1" onchange="updateChart(1)">
                    <option value="Happy">Happy</option>
                    <option value="Sad">Sad</option>
                    <option value="Proud">Proud</option>
                    <option value="Nervous">Nervous</option>
                    <option value="Tired">Tired</option>
                    <option value="Disappointed">Disappointed</option>
                    <option value="Scared">Scared</option>
                    <option value="Confused">Confused</option>
                    <option value="Excited">Excited</option>

                </select>
                <canvas id="responseChart1"></canvas>
                <button id="addButton1" onclick="addVote(1)">Add Vote</button>
                <button id="editButton1" onclick="editVote(1)" class="disabled">Edit Vote</button>
                <button id="removeButton1" onclick="removeVote(1)" class="disabled">Remove Vote</button>
                <button id="doneButton1" onclick="doneVote(1)" class="disabled">Done</button>
                <div id="feedback1" class="feedback"></div>
            </div> <br>

            <!-- Question 2 -->
            <div class="chart-wrapper">
                <h3>Onsay gibati nimo pagkakita nimos imong grado?</h3>
                <select id="satisfactionDropdown2" onchange="updateChart(2)">
                    <option value="Happy">Happy</option>
    <option value="Sad">Sad</option>
    <option value="Proud">Proud</option>
    <option value="Nervous">Nervous</option>
    <option value="Tired">Tired</option>
    <option value="Disappointed">Disappointed</option>
    <option value="Scared">Scared</option>
    <option value="Confused">Confused</option>
    <option value="Excited">Excited</option>
                </select>
                <canvas id="responseChart2"></canvas>
                <button id="addButton2" onclick="addVote(2)">Add Vote</button>
                <button id="editButton2" onclick="editVote(2)" class="disabled">Edit Vote</button>
                <button id="removeButton2" onclick="removeVote(2)" class="disabled">Remove Vote</button>
                <button id="doneButton2" onclick="doneVote(2)" class="disabled">Done</button>
                <div id="feedback2" class="feedback"></div>
            </div> <br>

            <!-- Question 3 -->
            <div class="chart-wrapper">
                <h3>Onsay pamati nimo atung sa mga grants nga gihatag ni NBSC?</h3>
                <select id="satisfactionDropdown3" onchange="updateChart(3)">
                    <option value="Happy">Happy</option>
                    <option value="Sad">Sad</option>
                    <option value="Proud">Proud</option>
                    <option value="Nervous">Nervous</option>
                    <option value="Tired">Tired</option>
                    <option value="Disappointed">Disappointed</option>
                    <option value="Scared">Scared</option>
                    <option value="Confused">Confused</option>
                    <option value="Excited">Excited</option>
                </select>
                <canvas id="responseChart3"></canvas>
                <button id="addButton3" onclick="addVote(3)">Add Vote</button>
                <button id="editButton3" onclick="editVote(3)" class="disabled">Edit Vote</button>
                <button id="removeButton3" onclick="removeVote(3)" class="disabled">Remove Vote</button>
                <button id="doneButton3" onclick="doneVote(3)" class="disabled">Done</button>
                <div id="feedback3" class="feedback"></div>
            </div> <br>

            <!-- Question 4 -->
            <div class="chart-wrapper">
                <h3>Onsay mabati nimo kung mag stay kas imong kurso?</h3>
                <select id="satisfactionDropdown4" onchange="updateChart(4)">
                    <option value="Happy">Happy</option>
    <option value="Sad">Sad</option>
    <option value="Proud">Proud</option>
    <option value="Nervous">Nervous</option>
    <option value="Tired">Tired</option>
    <option value="Disappointed">Disappointed</option>
    <option value="Scared">Scared</option>
    <option value="Confused">Confused</option>
    <option value="Excited">Excited</option>
                </select>
                <canvas id="responseChart4"></canvas>
                <button id="addButton4" onclick="addVote(4)">Add Vote</button>
                <button id="editButton4" onclick="editVote(4)" class="disabled">Edit Vote</button>
                <button id="removeButton4" onclick="removeVote(4)" class="disabled">Remove Vote</button>
                <button id="doneButton4" onclick="doneVote(4)" class="disabled">Done</button>
                <div id="feedback4" class="feedback"></div>
            </div> <br>

        </div>
    </div>    
        
<script>
    
   const ctx1 = document.getElementById('responseChart1').getContext('2d');
const ctx2 = document.getElementById('responseChart2').getContext('2d');
const ctx3 = document.getElementById('responseChart3').getContext('2d');
const ctx4 = document.getElementById('responseChart4').getContext('2d');

const chartConfig = {
    type: 'bar',
    options: {
        responsive: true,
        scales: {
            y: {
                beginAtZero: true,
                ticks: {
                    stepSize: 1
                }
            }
        },
        plugins: {
            tooltip: {
                callbacks: {
                    label: function(tooltipItem) {
                        return `${tooltipItem.label}: ${tooltipItem.raw} Votes`;
                    }
                }
            }
        }
    }
};

const emotions = ['Happy', 'Sad', 'Proud', 'Nervous', 'Tired', 'Disappointed', 'Scared', 'Confused', 'Excited'];

const initialData = {
    datasets: [{
        label: 'Votes',
        data: [0, 0, 0, 0, 0], // Initialize with 0 votes
        backgroundColor: ['rgba(75, 192, 192, 0.5)', 'rgba(255, 159, 64, 0.5)', 'rgba(255, 99, 132, 0.5)', 'rgba(153, 102, 255, 0.5)', 'rgba(255, 159, 64, 0.5)'],
        borderColor: ['rgba(75, 192, 192, 1)', 'rgba(255, 159, 64, 1)', 'rgba(255, 99, 132, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)'],
        borderWidth: 1
    }]
};

const responseChart1 = new Chart(ctx1, { ...chartConfig, data: { labels: emotions, ...initialData } });
const responseChart2 = new Chart(ctx2, { ...chartConfig, data: { labels: emotions, ...initialData } });
const responseChart3 = new Chart(ctx3, { ...chartConfig, data: { labels: emotions, ...initialData } });
const responseChart4 = new Chart(ctx4, { ...chartConfig, data: { labels: emotions, ...initialData } });

let voted1 = false, voted2 = false, voted3 = false, voted4 = false;

function updateChart(chartNumber) {
    const selectedOption = document.getElementById(`satisfactionDropdown${chartNumber}`).value;
    let data = Array(emotions.length).fill(0); // Reset all counts to 0
    data[emotions.indexOf(selectedOption)] = 1; // Set the selected emotion's index to 1 (vote count)

    if (chartNumber === 1) {
        responseChart1.data.datasets[0].data = data;
        responseChart1.update();
    } else if (chartNumber === 2) {
        responseChart2.data.datasets[0].data = data;
        responseChart2.update();
    } else if (chartNumber === 3) {
        responseChart3.data.datasets[0].data = data;
        responseChart3.update();
    } else if (chartNumber === 4) {
        responseChart4.data.datasets[0].data = data;
        responseChart4.update();
    }

    document.getElementById(`feedback${chartNumber}`).textContent = `Your vote for this question has been added!`;
}

function addVote(chartNumber) {
    if (chartNumber === 1 && !voted1) {
        voted1 = true;
        disableButtons(chartNumber);
    } else if (chartNumber === 2 && !voted2) {
        voted2 = true;
        disableButtons(chartNumber);
    } else if (chartNumber === 3 && !voted3) {
        voted3 = true;
        disableButtons(chartNumber);
    } else if (chartNumber === 4 && !voted4) {
        voted4 = true;
        disableButtons(chartNumber);
    }
}

function disableButtons(chartNumber) {
    document.getElementById(`satisfactionDropdown${chartNumber}`).disabled = true;
    document.getElementById(`addButton${chartNumber}`).disabled = true;
    document.getElementById(`editButton${chartNumber}`).classList.remove('disabled');
    document.getElementById(`removeButton${chartNumber}`).classList.remove('disabled');
    document.getElementById(`doneButton${chartNumber}`).classList.remove('disabled');
}

function editVote(chartNumber) {
    document.getElementById(`satisfactionDropdown${chartNumber}`).disabled = false;
    document.getElementById(`feedback${chartNumber}`).textContent = '';
}

function removeVote(chartNumber) {
    document.getElementById(`satisfactionDropdown${chartNumber}`).disabled = false;
    if (chartNumber === 1) {
        voted1 = false;
    } else if (chartNumber === 2) {
        voted2 = false;
    } else if (chartNumber === 3) {
        voted3 = false;
    } else if (chartNumber === 4) {
        voted4 = false;
    }
    document.getElementById(`editButton${chartNumber}`).classList.add('disabled');
    document.getElementById(`removeButton${chartNumber}`).classList.add('disabled');
    document.getElementById(`doneButton${chartNumber}`).classList.add('disabled');
}

function doneVote(chartNumber) {
    document.getElementById(`satisfactionDropdown${chartNumber}`).disabled = true;
    document.getElementById(`addButton${chartNumber}`).disabled = true;
    document.getElementById(`editButton${chartNumber}`).disabled = true;
    document.getElementById(`removeButton${chartNumber}`).disabled = true;
    document.getElementById(`doneButton${chartNumber}`).disabled = true;
}

</script>


    </section>

</body>
</html>
